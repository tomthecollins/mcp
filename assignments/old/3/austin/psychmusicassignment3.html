<!DOCTYPE html>

<html>
<head>
 <title>Page Title</title>
 
 <script src="nexusUI.js" type="text/javascript"></script>
 <script src="Tone.js" type="text/javascript"></script>
 
</head>

<body>
 <p>
  Big idea: try out auto-generated guitar and drum excerpts from different indie bands
  <br/>
  Mix and match, so guitar could be in Arctic Monkeys style while drums are in Strokes style...
 </p>
 <p>
  Guitar selection is based on x-position.
  <br/>
  Drum selection is based on y-position.
 </p>
 <p>
  Arctic Monkeys are located in the bottom-left corner (for guitar and drum selection).
  <br/>
  Strokes are located in the top-right corner.
 </p>

 
 <canvas nx="position" id="pos1" height="500" width="500"></canvas>
 <script type="text/javascript">
  // Define some players.
  var drums_0_0 = new Tone.Player("https://dl.dropboxusercontent.com/u/11997856/samples/20160503/austin_demo/drums/0/0.mp3").toMaster();
  var drums_1_0 = new Tone.Player("https://dl.dropboxusercontent.com/u/11997856/samples/20160503/austin_demo/drums/1/0.mp3").toMaster();
  var drums_2_0 = new Tone.Player("https://dl.dropboxusercontent.com/u/11997856/samples/20160503/austin_demo/drums/2/0.mp3").toMaster();
  var guitar_0_0 = new Tone.Player("https://dl.dropboxusercontent.com/u/11997856/samples/20160503/austin_demo/guitar/0/0.mp3").toMaster();
  var guitar_1_0 = new Tone.Player("https://dl.dropboxusercontent.com/u/11997856/samples/20160503/austin_demo/guitar/1/0.mp3").toMaster();
  var guitar_2_0 = new Tone.Player("https://dl.dropboxusercontent.com/u/11997856/samples/20160503/austin_demo/guitar/2/0.mp3").toMaster();
  
  
  var nos_drum_folders = 3;
  var nos_guit_folders = 3;
  nx.onload = function(){
   console.log('pos1:', pos1);
   // pos1.init();
   pos1.val = { x: 0, y: 0 };
   pos1.nodeSize = 20;
   var p = pos1.val;
   pos1.draw();
   pos1.release = function(){
    console.log('p:', p);
    // Get the slider y value and use it to select drum excerpt.
    var drum_folder = Math.floor(p.y*nos_drum_folders);
    console.log('drum_folder:', drum_folder);
    // Get the slider x value and use it to select guitar excerpt.
    var guit_folder = Math.floor(p.x*nos_guit_folders);
    console.log('guit_folder:', guit_folder);
    
    Tone.Transport.stop();
    switch (drum_folder){
     case 0:
      drums_0_0.sync().start(0);
      break;
     case 1:
      drums_1_0.sync().start(0);
      break;
     default:
      drums_2_0.sync().start(0);
    }
    switch (guit_folder){
     case 0:
      guitar_0_0.sync().start(0);
      break;
     case 1:
      guitar_1_0.sync().start(0);
      break;
     default:
      guitar_2_0.sync().start(0);
    }
    
    Tone.Transport.start();
    
   };
     /**
     * Returns the lower value in the range.
     */
   // @Override
   // public int getValue() {
   //     return super.getValue();
   // }
   //
   // /**
   //  * Sets the lower value in the range.
   //  */
   // @Override
   // public void setValue(int value) {
   //     int oldValue = getValue();
   //     if (oldValue == value) {
   //         return;
   //     }
   //
   //     // Compute new value and extent to maintain upper value.
   //     int oldExtent = getExtent();
   //     int newValue = Math.min(Math.max(getMinimum(), value), oldValue + oldExtent);
   //     int newExtent = oldExtent + oldValue - newValue;
   //
   //     // Set new value and extent, and fire a single change event.
   //     getModel().setRangeProperties(newValue, newExtent, getMinimum(), 
   //         getMaximum(), getValueIsAdjusting());
   // }
   //
   // /**
   //  * Returns the upper value in the range.
   //  */
   // public int getUpperValue() {
   //     return getValue() + getExtent();
   // }
   //
   // /**
   //  * Sets the upper value in the range.
   //  */
   // public void setUpperValue(int value) {
   //     // Compute new extent.
   //     int lowerValue = getValue();
   //     int newExtent = Math.min(Math.max(0, value - lowerValue), getMaximum() - lowerValue);
   //     
   //     // Set extent to set upper value.
   //     setExtent(newExtent);
   //
   //};
  };
  
 </script>


</body>
</html>
