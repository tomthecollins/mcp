<!DOCTYPE html>
<!-- saved from url=(0037)http://tonejs.org/examples/score.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
	<title>Synth plus sample</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

	<script type="text/javascript" src="./../../../lib/Tone.js"></script>
	<script type="text/javascript" src="./../../../lib/jquery.min.js"></script>
	<!--<script type="text/javascript" src="./../../../lib/Notone.GUI.js"></script>-->
	<!--<link rel="stylesheet" type="text/css" href="./../../../lib/style.css">-->
	<script type="text/javascript" src="./../../../lib/Interface.js"></script>
	<link rel="stylesheet" type="text/css" href="./../../../lib/examples.css">
	<script type="text/javascript">
		// jshint ignore: start
	</script>

</head>
<body>
	<div id="Content">
		<script id="ToneCode" type="text/javascript">
			// Define a synthesizer.
			var synth_bass = new Tone.PolySynth(4, Tone.MonoSynth, {
				"volume" : -10,
				"envelope" : {
						"attack" : 0.1,
						"decay" : 0.3,
						"release" : 2,
				},
				"filterEnvelope" : {
						"attack" : 0.01,
						"decay" : 0.1,
						"sustain" : 0.5,
						"min" : 200,
						"max" : 1200
				}
			}).toMaster();
   
   // Include some notes in the bass part.
   var part_bass = new Tone.Part(function(time, value){
    // The notes given as the second element in the array
    // will be passed in as the second argument.
    synth_bass.triggerAttackRelease(value.note, value.duration, time, value.velocity);
	 },
   [
    {
     "time": 0,
     "note": "A1",
     "duration": "8n",
     "velocity": 5
    },
    {
     "time": "0:1",
     "note": "B1",
     "duration": "20n",
     "velocity": 5
    },
	  {
     "time": "0:2",
     "note": "C1",
     "duration": "10n",
     "velocity": 5
    },
	  {
     "time": "0:3",
     "note": "D1",
     "duration": "10n",
     "velocity": 5
    },
		{
     "time": "0:4",
     "note": "E1",
     "duration": "10n",
     "velocity": 5
    },
		{
     "time": "0:5",
     "note": "F1",
     "duration": "10n",
     "velocity": 5
    },
		{
     "time": "0:2",
     "note": "G1",
     "duration": "10n",
     "velocity": 5
    }
	
	 ]);
		
   
   part_bass.start(0);
   part_bass.loop = true;
   part_bass.loopEnd = "2m";
	 
   
   // Define a sample.
   var sample_piano = new Tone.Sampler("https://dl.dropboxusercontent.com/u/11997856/samples/20150810/keyboards/pianos/piano_2/067_f.wav").toMaster();
   //Tone.Buffer.onload = function(){
   // sample_piano.triggerAttackRelease(0, "8n");
   //}
   
   // Include some notes in the piano part.
   var part_piano = new Tone.Part(function(time, value){
    // First element is a pitch shift.
    sample_piano.triggerAttackRelease(0, value.duration, time, value.velocity);
   },
   [
    {
     "time": "0",
     "duration": "16n",
     "velocity": 0.95
    },
    {
     "time": "0:1",
     "duration": "16n",
     "velocity": 0.95
    }
   ]);
   part_piano.start(0);
   part_piano.loop = true;
   part_piano.loopEnd = "1m";
   
   // Set tempo and overall transport loop points.
			Tone.Transport.bpm.value = 120;
			Tone.Transport.setLoopPoints(0, "2m");
   
   // Time the loading of the audio material into the Tone.Buffer.
   var t0 = Math.round(+new Date()/1000);
   console.log('t0:');
   console.log(t0);
   Tone.Buffer.onload = function(){
    var t1 = Math.round(+new Date()/1000);
    console.log('Time (in sec) elapsed loading buffer:');
    console.log(t1 - t0);
   };
		</script>
		<script type="text/javascript">
			$(function(){
				//Notone.config({
				//	"search" : false,
				//	"expandInDrawer" : true,
				//	"hideDrawer" : Interface.isMobile,
				//	"drawer" : true,
				//	"container" : "body"
				//});
				
				new Interface.Button({
					key : 32,
					type : "toggle",
					text : "Start",
					activeText : "Stop",
					start : function(){
      Tone.Transport.start();
					},
					end : function(){
						Tone.Transport.stop();
					}
				});
			});
		</script>
	</div>
</body>
</html>
